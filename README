Проскальзывание: например, может 2 раза выполниться первая сделка. Решение - сделать небольшой лаг по времени?
Где-то работаем с лотами, где то с акциями - и количество и цены. Привести все к единому знаменателю.
Заключение сделок на уровнях, где уже есть сделки - добавить проверку